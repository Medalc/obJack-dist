import{c as C,b as x,e as F,_ as E,u as I,d as $,f as N,h as U}from"./user-D4uOcHZT.js";import{T as D,g as L}from"./index-Wt1crfl8.js";import{I as P}from"./index-DrDqyv2m.js";import{_ as B}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-CxJUCFnl.js";import{d as v,h as V,E as g,r as o,s as H,k as a,F as M,v as R,o as q,c as S,b as A,w as s,u as n,B as G,g as d,I as J,J as K,D as j,H as z}from"./index-BPbcnTcR.js";import"./notData-CvMaLoqa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"main-box"},Q={class:"table-box"},W=v({name:"treeProTable"}),se=v({...W,setup(X){V(()=>{w(),g({title:"æ¸©é¦¨æç¤º",message:"è¯¥é¡µé¢ ProTable æ•°æ®ä¸ä¼šè‡ªåŠ¨è¯·æ±‚ï¼Œéœ€ç­‰å¾… treeFilter æ•°æ®è¯·æ±‚å®Œæˆä¹‹åŽï¼Œæ‰ä¼šè§¦å‘è¡¨æ ¼è¯·æ±‚ã€‚",type:"info",duration:1e4}),setTimeout(()=>{g({title:"æ¸©é¦¨æç¤º",message:"è¯¥é¡µé¢ ProTable æ€§åˆ«æœç´¢æ¡†ä¸ºè¿œç¨‹æ•°æ®æœç´¢ï¼Œè¯¦æƒ…å¯æŸ¥çœ‹ä»£ç ã€‚",type:"info",duration:1e4})},0)});const i=o(),u=H({departmentId:""}),c=o([]),w=async()=>{const{data:e}=await C();c.value=e,u.departmentId=c.value[1].id},T=e=>{z.success("è¯·æ³¨æ„æŸ¥çœ‹è¯·æ±‚å‚æ•°å˜åŒ– ðŸ¤”"),i.value.pageable.pageNum=1,u.departmentId=e},p=o(!1),m=o([]),h=e=>{m.value.length=0,e&&(p.value=!0,setTimeout(()=>{p.value=!1,m.value.push(...L.filter(r=>r.label.includes(e)))},500))},y=[{type:"index",label:"#",width:80},{prop:"username",label:"ç”¨æˆ·å§“å"},{prop:"gender",label:"æ€§åˆ«",sortable:!0,isFilterEnum:!1,enum:m.value,search:{el:"select",props:{placeholder:"è¯·è¾“å…¥æ€§åˆ«æŸ¥è¯¢",filterable:!0,remote:!0,reserveKeyword:!0,loading:p,remoteMethod:h}},render:e=>a(M,null,[e.row.gender===1?"ç”·":"å¥³"])},{prop:"idCard",label:"èº«ä»½è¯å·"},{prop:"email",label:"é‚®ç®±"},{prop:"address",label:"å±…ä½åœ°å€"},{prop:"status",label:"ç”¨æˆ·çŠ¶æ€",sortable:!0,tag:!0,enum:x,search:{el:"tree-select"},fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"åˆ›å»ºæ—¶é—´",width:180},{prop:"operation",label:"æ“ä½œ",width:300,fixed:"right"}],k=async e=>{await I($,{id:[e.id]},`åˆ é™¤ã€${e.username}ã€‘ç”¨æˆ·`),i.value.getTableList()},_=o(null),f=(e,r={})=>{var t;const l={title:e,row:{...r},isView:e==="æŸ¥çœ‹",api:e==="æ–°å¢ž"?N:e==="ç¼–è¾‘"?U:void 0,getTableList:i.value.getTableList};(t=_.value)==null||t.acceptParams(l)};return(e,r)=>{const l=R("el-button");return q(),S("div",O,[a(D,{label:"name",title:"éƒ¨é—¨åˆ—è¡¨(å•é€‰)",data:c.value,"default-value":u.departmentId,onChange:T},null,8,["data","default-value"]),A("div",Q,[a(E,{ref_key:"proTable",ref:i,title:"ç”¨æˆ·åˆ—è¡¨","row-key":"id",indent:30,columns:y,"request-api":n(F),"request-auto":!1,"init-param":u,"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:s(()=>[a(l,{type:"primary",icon:n(G),onClick:r[0]||(r[0]=t=>f("æ–°å¢ž"))},{default:s(()=>[d("æ–°å¢žç”¨æˆ·")]),_:1},8,["icon"])]),operation:s(t=>[a(l,{type:"primary",link:"",icon:n(J),onClick:b=>f("æŸ¥çœ‹",t.row)},{default:s(()=>[d("æŸ¥çœ‹")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(K),onClick:b=>f("ç¼–è¾‘",t.row)},{default:s(()=>[d("ç¼–è¾‘")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(j),onClick:b=>k(t.row)},{default:s(()=>[d("åˆ é™¤")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api","init-param"]),a(B,{ref_key:"drawerRef",ref:_},null,512),a(P,{ref:"dialogRef"},null,512)])])}}});export{se as default};
