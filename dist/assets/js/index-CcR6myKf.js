import{K as O,L as I,M as V,d as D,n as q,r as _,s as Y,v as d,N as G,o as m,c as J,k as t,w as l,O as k,P as h,g as n,u as o,B as z,Q as j,R as K,D as L,t as w,H as f,I as Q,J as W,G as X,F as Z,S as ee}from"./index-BLV9wkfW.js";import{_ as ae,g as te,a as le,b as se,u as b,d as B,r as re,i as ne,j as $,B as ie,f as oe,h as ue}from"./user-DzuLJFEh.js";import{I as ce,u as de}from"./index-C2WrdBhr.js";import{_ as pe}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-Dj49rjgt.js";import"./notData-CvMaLoqa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const me=()=>{const T=O(),y=I().authButtonListGet[T.name]||[];return{BUTTONS:V(()=>{let p={};return y.forEach(v=>p[v]=!0),p})}},fe={class:"table-box"},be=D({name:"useProTable"}),Te=D({...be,setup(T){const C=q(),y=()=>{C.push(`/proTable/useProTable/detail/${Math.random().toFixed(3)}?params=detail-page`)},i=_(),p=Y({type:1}),v=e=>({list:e.list,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),U=e=>{let a=JSON.parse(JSON.stringify(e));return a.username&&(a.username="custom-"+a.username),te(a)},{BUTTONS:N}=me(),P=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"username",label:"用户姓名",search:{el:"input"},render:e=>t(d("el-button"),{type:"primary",link:!0,onClick:()=>f.success("我是通过 tsx 语法渲染的内容")},{default:()=>[e.row.username]})},{prop:"gender",label:"性别",enum:le,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",search:{el:"input"}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",enum:se,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:e=>t(Z,null,[N.value.status?t(d("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>E(e.row)},null):t(d("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",headerRender:e=>t(d("el-button"),{type:"primary",onClick:()=>{f.success("我是通过 tsx 语法渲染的表头")}},{default:()=>[e.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:330}],A=async e=>{await b(B,{id:[e.id]},`删除【${e.username}】用户`),i.value.getTableList()},R=async e=>{await b(B,{id:e},"删除所选用户信息"),i.value.clearSelection(),i.value.getTableList()},F=async e=>{await b(re,{id:e.id},`重置【${e.username}】用户密码`),i.value.getTableList()},E=async e=>{await b(ne,{id:e.id,status:e.status==1?0:1},`切换【${e.username}】用户状态`),i.value.getTableList()},H=async()=>{ee.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>de($,"用户列表",i.value.searchParam))},x=_(null),M=()=>{var a;const e={title:"用户",tempApi:$,importApi:ie,getTableList:i.value.getTableList};(a=x.value)==null||a.acceptParams(e)},S=_(null),g=(e,a={})=>{var c;a=[{id:"licensePlate",label:"车牌号",myFormType:{name:"el-input",values:null},value:"豫10068",required:!1},{id:"startDate",label:"驾照开始日期",myFormType:{name:"el-date-picker",values:null},value:"2023-10-10",required:!0},{id:"state",label:"状态",myFormType:{name:"el-select",values:null},value:0,required:!0}];const s={title:e,enumData:[{label:"启用",value:1},{label:"禁用",value:0}],isView:e==="查看",row:a,api:e==="新增"?oe:e==="编辑"?ue:void 0,getTableList:i.value.getTableList};(c=S.value)==null||c.acceptParams(s)};return(e,a)=>{const s=d("el-button"),c=G("auth");return m(),J("div",fe,[t(ae,{ref_key:"proTable",ref:i,title:"用户列表",columns:P,"request-api":U,"init-param":p,"data-callback":v},{tableHeader:l(r=>[k((m(),h(s,{type:"primary",icon:o(z),onClick:a[0]||(a[0]=u=>g("新增"))},{default:l(()=>[n("新增用户")]),_:1},8,["icon"])),[[c,"add"]]),k((m(),h(s,{type:"primary",icon:o(j),plain:"",onClick:M},{default:l(()=>[n("批量添加用户")]),_:1},8,["icon"])),[[c,"batchAdd"]]),k((m(),h(s,{type:"primary",icon:o(K),plain:"",onClick:H},{default:l(()=>[n("导出用户数据")]),_:1},8,["icon"])),[[c,"export"]]),t(s,{type:"primary",plain:"",onClick:y},{default:l(()=>[n("To 子集详情页面")]),_:1}),t(s,{type:"danger",icon:o(L),plain:"",onClick:u=>R(r.selectedListIds),disabled:!r.isSelected},{default:l(()=>[n(" 批量删除用户 ")]),_:2},1032,["icon","onClick","disabled"])]),expand:l(r=>[n(w(r.row),1)]),usernameHeader:l(r=>[t(s,{type:"primary",onClick:a[1]||(a[1]=u=>o(f).success("我是通过作用域插槽渲染的表头"))},{default:l(()=>[n(w(r.row.label),1)]),_:2},1024)]),createTime:l(r=>[t(s,{type:"primary",link:"",onClick:a[2]||(a[2]=u=>o(f).success("我是通过作用域插槽渲染的内容"))},{default:l(()=>[n(w(r.row.createTime),1)]),_:2},1024)]),operation:l(r=>[t(s,{type:"primary",link:"",icon:o(Q),onClick:u=>g("查看",r.row)},{default:l(()=>[n("查看")]),_:2},1032,["icon","onClick"]),t(s,{type:"primary",link:"",icon:o(W),onClick:u=>g("编辑",r.row)},{default:l(()=>[n("编辑")]),_:2},1032,["icon","onClick"]),t(s,{type:"primary",link:"",icon:o(X),onClick:u=>F(r.row)},{default:l(()=>[n("重置密码")]),_:2},1032,["icon","onClick"]),t(s,{type:"primary",link:"",icon:o(L),onClick:u=>A(r.row)},{default:l(()=>[n("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["init-param"]),t(pe,{ref_key:"drawerRef",ref:S},null,512),t(ce,{ref_key:"dialogRef",ref:x},null,512)])}}});export{Te as default};
