import{g as S,_ as T,a as L,b as N,u as c,d,r as U}from"./user-D2yX1KCw.js";import{S as $,T as E,P as u,U as R}from"./@element-plus-b0mvxhbE.js";import{E as m}from"./element-plus-BMLDilJf.js";import{d as f,r as D,ah as b,o as P,c as V,U as n,O as a,u as i,S as p,T as A,a as B}from"./@vue-CsViAIeL.js";import"./notData-CvMaLoqa.js";import"./index-QuK0x8D1.js";import"./vue-i18n-CldGudpF.js";import"./@intlify-BrbEMGpa.js";import"./vue-uxj3NNEf.js";import"./pinia-j-FaXOu-.js";import"./axios-B4uVmeYG.js";import"./vue-router-eHVeVfd6.js";import"./nprogress-CN1HEpHx.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DWeX12Kw.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";import"./plugin-vueexport-helper-DlAUqK2U.js";import"./print-js-t3lAMS30.js";const q={class:"table-box"},H=B("span",{style:{color:"var(--el-color-primary)"}},"我是插入在表格最后的内容。若表格有合计行，该内容会位于合计行之上。",-1),M=f({name:"complexProTable"}),me=f({...M,setup(j){const r=D(),_=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"base",label:"基本信息",headerRender:e=>n(b("el-button"),{type:"primary",onClick:()=>{m.success("我是通过 tsx 语法渲染的表头")}},{default:()=>[e.label]}),_children:[{prop:"username",label:"用户姓名",width:110},{prop:"user.detail.age",label:"年龄",width:100},{prop:"gender",label:"性别",width:100,enum:L,fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"details",label:"详细资料",_children:[{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"}]}]},{prop:"status",label:"用户状态",tag:!0,enum:N,fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"创建时间",width:200},{prop:"operation",label:"操作",fixed:"right",width:230}],h=()=>{r.value.element.setCurrentRow(r.value.tableData[4])},w=e=>{const{columns:o}=e,t=[];return o.forEach((l,s)=>{if(s===0)return t[s]="合计";t[s]="N/A"}),t},y=({rowIndex:e,columnIndex:o})=>{if(o===3)return e%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},g=({rowIndex:e})=>e===2?"warning-row":e===6?"success-row":"",C=(e,o)=>{o.property!="operation"&&m.success("当前行被点击了！")},k=async e=>{await c(d,{id:[e.id]},`删除【${e.username}】用户`),r.value.getTableList()},v=async e=>{await c(d,{id:e},"删除所选用户信息"),r.value.clearSelection(),r.value.getTableList()},x=async e=>{await c(U,{id:e.id},`重置【${e.username}】用户密码`),r.value.getTableList()};return(e,o)=>{const t=b("el-button");return P(),V("div",q,[n(T,{ref_key:"proTable",ref:r,title:"用户列表","highlight-current-row":"",columns:_,"request-api":i(S),"row-class-name":g,"span-method":y,"show-summary":!0,"summary-method":w,onRowClick:C},{tableHeader:a(l=>[n(t,{type:"primary",icon:i($),onClick:o[0]||(o[0]=s=>r.value.element.toggleAllSelection())},{default:a(()=>[p("全选 / 全不选")]),_:1},8,["icon"]),n(t,{type:"primary",icon:i(E),plain:"",onClick:h},{default:a(()=>[p("选中第五行")]),_:1},8,["icon"]),n(t,{type:"danger",icon:i(u),plain:"",onClick:s=>v(l.selectedListIds),disabled:!l.isSelected},{default:a(()=>[p(" 批量删除用户 ")]),_:2},1032,["icon","onClick","disabled"])]),expand:a(l=>[p(A(l.row),1)]),operation:a(l=>[n(t,{type:"primary",link:"",icon:i(R),onClick:s=>x(l.row)},{default:a(()=>[p("重置密码")]),_:2},1032,["icon","onClick"]),n(t,{type:"primary",link:"",icon:i(u),onClick:s=>k(l.row)},{default:a(()=>[p("删除")]),_:2},1032,["icon","onClick"])]),append:a(()=>[H]),_:1},8,["request-api"])])}}});export{me as default};
