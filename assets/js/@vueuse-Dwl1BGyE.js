import{g as M,b as q,u as A,e as p,r as g,w as j,f as D,h as R}from"./@vue-CsViAIeL.js";function k(t){return M()?(q(t),!0):!1}function F(t){return typeof t=="function"?t():A(t)}const x=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const T=Object.prototype.toString,W=t=>T.call(t)==="[object Object]",b=()=>{};function z(t,l){function e(...r){return new Promise((u,i)=>{Promise.resolve(t(()=>l.apply(this,r),{fn:l,thisArg:this,args:r})).then(u).catch(i)})}return e}function O(t,l={}){let e,r,u=b;const i=s=>{clearTimeout(s),u(),u=b};return s=>{const a=F(t),c=F(l.maxWait);return e&&i(e),a<=0||c!==void 0&&c<=0?(r&&(i(r),r=null),Promise.resolve(s())):new Promise((o,f)=>{u=l.rejectOnCancel?f:o,c&&!r&&(r=setTimeout(()=>{e&&i(e),r=null,o(s())},c)),e=setTimeout(()=>{r&&i(r),r=null,o(s())},a)})}}function I(t,l=200,e={}){return z(O(l,e),t)}function S(t){var l;const e=F(t);return(l=e==null?void 0:e.$el)!=null?l:e}const P=x?window:void 0,L=x?window.document:void 0;function E(...t){let l,e,r,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,r,u]=t,l=P):[l,e,r,u]=t,!l)return b;Array.isArray(e)||(e=[e]),Array.isArray(r)||(r=[r]);const i=[],d=()=>{i.forEach(o=>o()),i.length=0},s=(o,f,m,v)=>(o.addEventListener(f,m,v),()=>o.removeEventListener(f,m,v)),a=j(()=>[S(l),F(u)],([o,f])=>{if(d(),!o)return;const m=W(f)?{...f}:f;i.push(...e.flatMap(v=>r.map(w=>s(o,v,w,m))))},{immediate:!0,flush:"post"}),c=()=>{a(),d()};return k(c),c}function _(){const t=g(!1),l=R();return l&&D(()=>{t.value=!0},l),t}function B(t){const l=_();return p(()=>(l.value,!!t()))}const y=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function V(t,l={}){const{document:e=L,autoExit:r=!1}=l,u=p(()=>{var n;return(n=S(t))!=null?n:e==null?void 0:e.querySelector("html")}),i=g(!1),d=p(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(n=>e&&n in e||u.value&&n in u.value)),s=p(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(n=>e&&n in e||u.value&&n in u.value)),a=p(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(n=>e&&n in e||u.value&&n in u.value)),c=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(n=>e&&n in e),o=B(()=>u.value&&e&&d.value!==void 0&&s.value!==void 0&&a.value!==void 0),f=()=>c?(e==null?void 0:e[c])===u.value:!1,m=()=>{if(a.value){if(e&&e[a.value]!=null)return e[a.value];{const n=u.value;if((n==null?void 0:n[a.value])!=null)return!!n[a.value]}}return!1};async function v(){if(!(!o.value||!i.value)){if(s.value)if((e==null?void 0:e[s.value])!=null)await e[s.value]();else{const n=u.value;(n==null?void 0:n[s.value])!=null&&await n[s.value]()}i.value=!1}}async function w(){if(!o.value||i.value)return;m()&&await v();const n=u.value;d.value&&(n==null?void 0:n[d.value])!=null&&(await n[d.value](),i.value=!0)}async function C(){await(i.value?v():w())}const h=()=>{const n=m();(!n||n&&f())&&(i.value=n)};return E(e,y,h,!1),E(()=>S(u),y,h,!1),r&&k(v),{isSupported:o,isFullscreen:i,enter:w,exit:v,toggle:C}}export{V as a,I as u};
