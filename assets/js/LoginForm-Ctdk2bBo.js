import{u as V}from"./vue-router-eHVeVfd6.js";import{u as k,l as S,i as F,g as N}from"./index-QuK0x8D1.js";import{u as R,a as T}from"./keepAlive-4Fiz1qty.js";import{R as x}from"./@element-plus-b0mvxhbE.js";import{m as A}from"./js-md5-C6Sgg8pf.js";import{d as C}from"./element-plus-BMLDilJf.js";import{d as U,r as d,Z as c,f as B,ah as l,o as E,c as h,U as r,O as i,a as q,S as z,u as K,F as L}from"./@vue-CsViAIeL.js";import{_ as M}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./vue-i18n-CldGudpF.js";import"./@intlify-BrbEMGpa.js";import"./vue-uxj3NNEf.js";import"./pinia-j-FaXOu-.js";import"./axios-B4uVmeYG.js";import"./nprogress-CN1HEpHx.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DWeX12Kw.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const D={class:"login-btn"},I=U({__name:"LoginForm",setup(O){const f=V(),_=k(),g=R(),w=T(),m=d(),v=c({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),s=d(!1),t=c({username:"",password:""}),u=e=>{e&&e.validate(async o=>{if(o){s.value=!0;try{const{data:a}=await S({...t,password:A(t.password)});_.setToken(a.access_token),await F(),g.closeMultipleTab(),w.setKeepAliveName(),f.push({name:"useProTable"}),C({title:N(),message:"欢迎登录",type:"success",duration:3e3})}finally{s.value=!1}}})};return B(()=>{document.onkeydown=e=>{if(e=window.event||e,e.code==="Enter"||e.code==="enter"||e.code==="NumpadEnter"){if(s.value)return;u(m.value)}}}),(e,o)=>{const a=l("el-input"),p=l("el-form-item"),b=l("el-form"),y=l("el-button");return E(),h(L,null,[r(b,{ref_key:"loginFormRef",ref:m,model:t,rules:v,size:"large"},{default:i(()=>[r(p,{prop:"username"},{default:i(()=>[r(a,{modelValue:t.username,"onUpdate:modelValue":o[0]||(o[0]=n=>t.username=n),placeholder:"用户名：admin / user"},null,8,["modelValue"])]),_:1}),r(p,{prop:"password"},{default:i(()=>[r(a,{type:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=n=>t.password=n),placeholder:"密码：123456","show-password":"",autocomplete:"new-password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),q("div",D,[r(y,{icon:K(x),onClick:o[2]||(o[2]=n=>u(m.value)),size:"large",type:"primary",loading:s.value},{default:i(()=>[z(" 登录 ")]),_:1},8,["icon","loading"])])],64)}}}),de=M(I,[["__scopeId","data-v-b7c297db"]]);export{de as default};
