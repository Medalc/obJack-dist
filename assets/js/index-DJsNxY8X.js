import{k as q,c as M,g as H,_ as j,u as I,d as O,r as W,j as S,B as z,f as Q,h as X}from"./user-D2yX1KCw.js";import{I as Z,u as G}from"./index-HL7W80wQ.js";import{T as J,g as K,u as Y}from"./index-DaOWYUs9.js";import{_ as ee}from"./UserDrawer.vuevuetypescriptsetuptruenameUserDrawerlang-C8bR0UYD.js";import{d as w,r as h,w as ae,ah as U,o as d,c as v,F as D,a7 as R,a as y,T as B,R as L,U as t,O as r,I as le,H as te,M as A,Q as se,Z as E,f as re,u as c,S as m}from"./@vue-CsViAIeL.js";import{_ as oe}from"./plugin-vueexport-helper-DlAUqK2U.js";import{S as ne,W as ie,X as ue,v as ce,V as de,U as pe,P as fe}from"./@element-plus-b0mvxhbE.js";import{E as N,e as me}from"./element-plus-BMLDilJf.js";import"./notData-CvMaLoqa.js";import"./index-QuK0x8D1.js";import"./vue-i18n-CldGudpF.js";import"./@intlify-BrbEMGpa.js";import"./vue-uxj3NNEf.js";import"./pinia-j-FaXOu-.js";import"./axios-B4uVmeYG.js";import"./vue-router-eHVeVfd6.js";import"./nprogress-CN1HEpHx.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DWeX12Kw.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";import"./print-js-t3lAMS30.js";const ve={class:"select-filter"},_e={class:"select-filter-item-title"},ye={key:0,class:"select-filter-notData"},ke={class:"select-filter-list"},be=["onClick"],ge=w({name:"selectFilter"}),he=w({...ge,props:{data:{default:()=>[]},defaultValues:{default:()=>({})}},emits:["change"],setup(F,{emit:o}){const _=F,a=h({});ae(()=>_.defaultValues,()=>{_.data.forEach(e=>{e.multiple?a.value[e.key]=_.defaultValues[e.key]??[""]:a.value[e.key]=_.defaultValues[e.key]??""})},{deep:!0,immediate:!0});const C=o,k=(e,s)=>{if(!e.multiple)a.value[e.key]!==s.value&&(a.value[e.key]=s.value);else if(e.options[0].value===s.value&&(a.value[e.key]=[s.value]),a.value[e.key].includes(s.value)){let b=a.value[e.key].findIndex(g=>g===s.value);a.value[e.key].splice(b,1),a.value[e.key].length==0&&(a.value[e.key]=[e.options[0].value])}else a.value[e.key].push(s.value),a.value[e.key].includes(e.options[0].value)&&a.value[e.key].splice(0,1);C("change",a.value)};return(e,s)=>{const b=U("el-icon"),g=U("el-scrollbar");return d(),v("div",ve,[(d(!0),v(D,null,R(e.data,n=>(d(),v("div",{key:n.key,class:"select-filter-item"},[y("div",_e,[y("span",null,B(n.title)+" ：",1)]),n.options.length?L("",!0):(d(),v("span",ye,"暂无数据 ~")),t(g,null,{default:r(()=>[y("ul",ke,[(d(!0),v(D,null,R(n.options,i=>(d(),v("li",{key:i.value,class:le({active:i.value===a.value[n.key]||Array.isArray(a.value[n.key])&&a.value[n.key].includes(i.value)}),onClick:$=>k(n,i)},[te(e.$slots,"default",{row:i},()=>[i.icon?(d(),A(b,{key:0},{default:r(()=>[(d(),A(se(i.icon)))]),_:2},1024)):L("",!0),y("span",null,B(i.label),1)],!0)],10,be))),128))])]),_:2},1024)]))),128))])}}}),we=oe(he,[["__scopeId","data-v-4de6a323"]]),Ce={class:"main-box"},$e={class:"table-box"},Te={class:"card mb10 pt0 pb0"},xe=w({name:"useSelectFilter"}),ea=w({...xe,setup(F){const o=h(),_=[{type:"index",label:"#",width:80},{prop:"username",label:"用户姓名",width:120},{prop:"gender",label:"性别",width:120,sortable:!0,enum:K},{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",width:120,sortable:!0,tag:!0,enum:Y},{prop:"createTime",label:"创建时间",width:180,sortable:!0},{prop:"operation",label:"操作",width:330,fixed:"right"}],a=E([{title:"用户状态(单)",key:"userStatus",options:[{label:"全部",value:""},{label:"在职",value:"1",icon:"User"},{label:"待培训",value:"2",icon:"Bell"},{label:"待上岗",value:"3",icon:"Clock"},{label:"已离职",value:"4",icon:"CircleClose"},{label:"已退休",value:"5",icon:"CircleCheck"}]},{title:"用户角色(多)",key:"userRole",multiple:!0,options:[]}]);re(()=>C());const C=async()=>{const{data:l}=await q();a[1].options=l},k=h({userStatus:"2",userRole:["1","3"]}),e=l=>{N.success("请注意查看请求参数变化 🤔"),o.value.pageable.pageNum=1,k.value=l},s=E({departmentId:["11"]}),b=l=>{N.success("请注意查看请求参数变化 🤔"),o.value.pageable.pageNum=1,s.departmentId=l},g=async l=>{await I(O,{id:[l.id]},`删除【${l.username}】用户`),o.value.getTableList()},n=async l=>{await I(W,{id:l.id},`重置【${l.username}】用户密码`),o.value.getTableList()},i=async()=>{me.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>G(S,"用户列表",o.value.searchParam))},$=h(null),P=()=>{var f;const l={title:"用户",tempApi:S,importApi:z,getTableList:o.value.getTableList};(f=$.value)==null||f.acceptParams(l)},V=h(null),T=(l,f={})=>{var p;const u={title:l,isView:l==="查看",row:{...f},api:l==="新增"?Q:l==="编辑"?X:void 0,getTableList:o.value.getTableList};(p=V.value)==null||p.acceptParams(u)};return(l,f)=>{const u=U("el-button");return d(),v("div",Ce,[t(J,{title:"部门列表(多选)",multiple:"",label:"name","request-api":c(M),"default-value":s.departmentId,onChange:b},null,8,["request-api","default-value"]),y("div",$e,[y("div",Te,[t(we,{data:a,"default-values":k.value,onChange:e},null,8,["data","default-values"])]),t(j,{ref_key:"proTable",ref:o,title:"用户列表",columns:_,"request-api":c(H),"init-param":Object.assign(s,k.value)},{tableHeader:r(()=>[t(u,{type:"primary",icon:c(ne),onClick:f[0]||(f[0]=p=>T("新增"))},{default:r(()=>[m("新增用户")]),_:1},8,["icon"]),t(u,{type:"primary",icon:c(ie),plain:"",onClick:P},{default:r(()=>[m("批量添加用户")]),_:1},8,["icon"]),t(u,{type:"primary",icon:c(ue),plain:"",onClick:i},{default:r(()=>[m("导出用户数据")]),_:1},8,["icon"])]),operation:r(p=>[t(u,{type:"primary",link:"",icon:c(ce),onClick:x=>T("查看",p.row)},{default:r(()=>[m("查看")]),_:2},1032,["icon","onClick"]),t(u,{type:"primary",link:"",icon:c(de),onClick:x=>T("编辑",p.row)},{default:r(()=>[m("编辑")]),_:2},1032,["icon","onClick"]),t(u,{type:"primary",link:"",icon:c(pe),onClick:x=>n(p.row)},{default:r(()=>[m("重置密码")]),_:2},1032,["icon","onClick"]),t(u,{type:"primary",link:"",icon:c(fe),onClick:x=>g(p.row)},{default:r(()=>[m("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api","init-param"]),t(ee,{ref_key:"drawerRef",ref:V},null,512),t(Z,{ref_key:"dialogRef",ref:$},null,512)])])}}});export{ea as default};
