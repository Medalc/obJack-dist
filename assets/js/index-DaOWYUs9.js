import{f as q}from"./element-plus-BMLDilJf.js";import{d as V,r as s,E as D,w as p,ah as v,o as b,c as y,T as _,R as E,U as f,O as g,u as R,a as F,H as O,J as U,n as z,S as H}from"./@vue-CsViAIeL.js";import{_ as I}from"./plugin-vueexport-helper-DlAUqK2U.js";const Q=[{label:"男",value:1},{label:"女",value:2}],W=[{label:"启用",value:1},{label:"禁用",value:0}],J={class:"card filter"},K={key:0,class:"title sle"},M={class:"el-tree-node__label"},P=V({name:"TreeFilter"}),$=V({...P,props:{requestApi:{},data:{},title:{},id:{default:"id"},label:{default:"label"},multiple:{type:Boolean,default:!1},defaultValue:{}},emits:["change"],setup(C,{expose:T,emit:w}){const l=C,N={children:"children",label:l.label},r=s(),n=s([]),u=s([]),d=s(),h=()=>{l.multiple?d.value=Array.isArray(l.defaultValue)?l.defaultValue:[l.defaultValue]:d.value=typeof l.defaultValue=="string"?l.defaultValue:""};D(async()=>{if(h(),l.requestApi){const{data:e}=await l.requestApi();n.value=e,u.value=[{id:"",[l.label]:"全部"},...e]}}),p(()=>l.defaultValue,()=>z(()=>h()),{deep:!0,immediate:!0}),p(()=>l.data,()=>{var e;(e=l.data)!=null&&e.length&&(n.value=l.data,u.value=[{id:"",[l.label]:"全部"},...l.data])},{deep:!0,immediate:!0});const c=s("");p(c,e=>{r.value.filter(e)});const A=(e,i,a)=>{if(!e)return!0;let o=a.parent,t=[a.label],k=1;for(;k<a.level;)t=[...t,o.label],o=o.parent,k++;return t.some(x=>x.indexOf(e)!==-1)},m=w,S=e=>{l.multiple||m("change",e[l.id])},B=()=>{var e;m("change",(e=r.value)==null?void 0:e.getCheckedKeys())};return T({treeData:n,treeAllData:u,treeRef:r}),(e,i)=>{const a=v("el-input"),o=v("el-scrollbar");return b(),y("div",J,[e.title?(b(),y("h4",K,_(e.title),1)):E("",!0),f(a,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=t=>c.value=t),placeholder:"输入关键字进行过滤",clearable:""},null,8,["modelValue"]),f(o,{style:U({height:e.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:g(()=>[f(R(q),{ref_key:"treeRef",ref:r,"default-expand-all":"","node-key":e.id,data:e.multiple?n.value:u.value,"show-checkbox":e.multiple,"check-strictly":!1,"current-node-key":e.multiple?"":d.value,"highlight-current":!e.multiple,"expand-on-click-node":!1,"check-on-click-node":e.multiple,props:N,"filter-node-method":A,"default-checked-keys":e.multiple?d.value:[],onNodeClick:S,onCheck:B},{default:g(t=>[F("span",M,[O(e.$slots,"default",{row:t},()=>[H(_(t.node.label),1)],!0)])]),_:3},8,["node-key","data","show-checkbox","current-node-key","highlight-current","check-on-click-node","default-checked-keys"])]),_:3},8,["style"])])}}}),X=I($,[["__scopeId","data-v-0c1171e0"]]);export{X as T,Q as g,W as u};
