import{k as q,c as H,g as M,_ as j,u as D,d as W,r as z,j as I,B as G,f as J,h as O}from"./user-BJwbVdI6.js";import{I as Q,u as X}from"./index-D1w3hjcP.js";import{T as K,g as Y,u as Z}from"./index-Co66pLHw.js";import{_ as ee}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-CFPcF4lz.js";import{d as w,r as h,T as ae,v as F,o as d,c as _,F as B,f as R,b as k,t as S,U as L,k as t,w as r,V as le,W as te,P as A,X as se,s as N,h as re,u as i,B as ne,g as v,Q as oe,R as ue,I as ce,J as ie,G as de,D as pe,H as P,S as fe}from"./index-C-iWv7FW.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./notData-CvMaLoqa.js";const _e={class:"select-filter"},ye={class:"select-filter-item-title"},ke={key:0,class:"select-filter-notData"},me={class:"select-filter-list"},be=["onClick"],ge=w({name:"selectFilter"}),he=w({...ge,props:{data:{default:()=>[]},defaultValues:{default:()=>({})}},emits:["change"],setup(U,{emit:n}){const y=U,a=h({});ae(()=>y.defaultValues,()=>{y.data.forEach(e=>{e.multiple?a.value[e.key]=y.defaultValues[e.key]??[""]:a.value[e.key]=y.defaultValues[e.key]??""})},{deep:!0,immediate:!0});const C=n,m=(e,s)=>{if(!e.multiple)a.value[e.key]!==s.value&&(a.value[e.key]=s.value);else if(e.options[0].value===s.value&&(a.value[e.key]=[s.value]),a.value[e.key].includes(s.value)){let b=a.value[e.key].findIndex(g=>g===s.value);a.value[e.key].splice(b,1),a.value[e.key].length==0&&(a.value[e.key]=[e.options[0].value])}else a.value[e.key].push(s.value),a.value[e.key].includes(e.options[0].value)&&a.value[e.key].splice(0,1);C("change",a.value)};return(e,s)=>{const b=F("el-icon"),g=F("el-scrollbar");return d(),_("div",_e,[(d(!0),_(B,null,R(e.data,o=>(d(),_("div",{key:o.key,class:"select-filter-item"},[k("div",ye,[k("span",null,S(o.title)+" ï¼š",1)]),o.options.length?L("",!0):(d(),_("span",ke,"æš‚æ— æ•°æ® ~")),t(g,null,{default:r(()=>[k("ul",me,[(d(!0),_(B,null,R(o.options,u=>(d(),_("li",{key:u.value,class:le({active:u.value===a.value[o.key]||Array.isArray(a.value[o.key])&&a.value[o.key].includes(u.value)}),onClick:$=>m(o,u)},[te(e.$slots,"default",{row:u},()=>[u.icon?(d(),A(b,{key:0},{default:r(()=>[(d(),A(se(u.icon)))]),_:2},1024)):L("",!0),k("span",null,S(u.label),1)],!0)],10,be))),128))])]),_:2},1024)]))),128))])}}}),we=ve(he,[["__scopeId","data-v-4de6a323"]]),Ce={class:"main-box"},$e={class:"table-box"},Te={class:"card mb10 pt0 pb0"},xe=w({name:"useSelectFilter"}),Se=w({...xe,setup(U){const n=h(),y=[{type:"index",label:"#",width:80},{prop:"username",label:"ç”¨æˆ·å§“å",width:120},{prop:"gender",label:"æ€§åˆ«",width:120,sortable:!0,enum:Y},{prop:"idCard",label:"èº«ä»½è¯å·"},{prop:"email",label:"é‚®ç®±"},{prop:"address",label:"å±…ä½åœ°å€"},{prop:"status",label:"ç”¨æˆ·çŠ¶æ€",width:120,sortable:!0,tag:!0,enum:Z},{prop:"createTime",label:"åˆ›å»ºæ—¶é—´",width:180,sortable:!0},{prop:"operation",label:"æ“ä½œ",width:330,fixed:"right"}],a=N([{title:"ç”¨æˆ·çŠ¶æ€(å•)",key:"userStatus",options:[{label:"å…¨éƒ¨",value:""},{label:"åœ¨èŒ",value:"1",icon:"User"},{label:"å¾…åŸ¹è®­",value:"2",icon:"Bell"},{label:"å¾…ä¸Šå²—",value:"3",icon:"Clock"},{label:"å·²ç¦»èŒ",value:"4",icon:"CircleClose"},{label:"å·²é€€ä¼‘",value:"5",icon:"CircleCheck"}]},{title:"ç”¨æˆ·è§’è‰²(å¤š)",key:"userRole",multiple:!0,options:[]}]);re(()=>C());const C=async()=>{const{data:l}=await q();a[1].options=l},m=h({userStatus:"2",userRole:["1","3"]}),e=l=>{P.success("è¯·æ³¨æ„æŸ¥çœ‹è¯·æ±‚å‚æ•°å˜åŒ– ðŸ¤”"),n.value.pageable.pageNum=1,m.value=l},s=N({departmentId:["11"]}),b=l=>{P.success("è¯·æ³¨æ„æŸ¥çœ‹è¯·æ±‚å‚æ•°å˜åŒ– ðŸ¤”"),n.value.pageable.pageNum=1,s.departmentId=l},g=async l=>{await D(W,{id:[l.id]},`åˆ é™¤ã€${l.username}ã€‘ç”¨æˆ·`),n.value.getTableList()},o=async l=>{await D(z,{id:l.id},`é‡ç½®ã€${l.username}ã€‘ç”¨æˆ·å¯†ç `),n.value.getTableList()},u=async()=>{fe.confirm("ç¡®è®¤å¯¼å‡ºç”¨æˆ·æ•°æ®?","æ¸©é¦¨æç¤º",{type:"warning"}).then(()=>X(I,"ç”¨æˆ·åˆ—è¡¨",n.value.searchParam))},$=h(null),E=()=>{var f;const l={title:"ç”¨æˆ·",tempApi:I,importApi:G,getTableList:n.value.getTableList};(f=$.value)==null||f.acceptParams(l)},V=h(null),T=(l,f={})=>{var p;const c={title:l,isView:l==="æŸ¥çœ‹",row:{...f},api:l==="æ–°å¢ž"?J:l==="ç¼–è¾‘"?O:void 0,getTableList:n.value.getTableList};(p=V.value)==null||p.acceptParams(c)};return(l,f)=>{const c=F("el-button");return d(),_("div",Ce,[t(K,{title:"éƒ¨é—¨åˆ—è¡¨(å¤šé€‰)",multiple:"",label:"name","request-api":i(H),"default-value":s.departmentId,onChange:b},null,8,["request-api","default-value"]),k("div",$e,[k("div",Te,[t(we,{data:a,"default-values":m.value,onChange:e},null,8,["data","default-values"])]),t(j,{ref_key:"proTable",ref:n,title:"ç”¨æˆ·åˆ—è¡¨",columns:y,"request-api":i(M),"init-param":Object.assign(s,m.value)},{tableHeader:r(()=>[t(c,{type:"primary",icon:i(ne),onClick:f[0]||(f[0]=p=>T("æ–°å¢ž"))},{default:r(()=>[v("æ–°å¢žç”¨æˆ·")]),_:1},8,["icon"]),t(c,{type:"primary",icon:i(oe),plain:"",onClick:E},{default:r(()=>[v("æ‰¹é‡æ·»åŠ ç”¨æˆ·")]),_:1},8,["icon"]),t(c,{type:"primary",icon:i(ue),plain:"",onClick:u},{default:r(()=>[v("å¯¼å‡ºç”¨æˆ·æ•°æ®")]),_:1},8,["icon"])]),operation:r(p=>[t(c,{type:"primary",link:"",icon:i(ce),onClick:x=>T("æŸ¥çœ‹",p.row)},{default:r(()=>[v("æŸ¥çœ‹")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(ie),onClick:x=>T("ç¼–è¾‘",p.row)},{default:r(()=>[v("ç¼–è¾‘")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(de),onClick:x=>o(p.row)},{default:r(()=>[v("é‡ç½®å¯†ç ")]),_:2},1032,["icon","onClick"]),t(c,{type:"primary",link:"",icon:i(pe),onClick:x=>g(p.row)},{default:r(()=>[v("åˆ é™¤")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api","init-param"]),t(ee,{ref_key:"drawerRef",ref:V},null,512),t(Q,{ref_key:"dialogRef",ref:$},null,512)])])}}});export{Se as default};
