import{b as V,u as H}from"./vue-router-eHVeVfd6.js";import{_ as q,g as I,a as Y,b as z,u as m,d as U,r as G,i as J,j as L,B as W,f as j,h as X}from"./user-D2yX1KCw.js";import{I as Z,u as K}from"./index-HL7W80wQ.js";import{a as Q}from"./index-QuK0x8D1.js";import{e as ee,d as B,r as g,Z as te,ah as c,ap as ae,o as f,c as re,U as a,O as r,P as h,M as k,S as o,u as n,T as w,F as le}from"./@vue-CsViAIeL.js";import{_ as se}from"./UserDrawer.vuevuetypescriptsetuptruenameUserDrawerlang-C8bR0UYD.js";import{S as oe,W as ie,X as ne,P as $,v as ue,V as pe,U as ce}from"./@element-plus-b0mvxhbE.js";import{E as b,e as de}from"./element-plus-BMLDilJf.js";import"./notData-CvMaLoqa.js";import"./plugin-vueexport-helper-DlAUqK2U.js";import"./print-js-t3lAMS30.js";import"./@intlify-BrbEMGpa.js";import"./vue-i18n-CldGudpF.js";import"./vue-uxj3NNEf.js";import"./pinia-j-FaXOu-.js";import"./axios-B4uVmeYG.js";import"./nprogress-CN1HEpHx.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./lodash-es-CiJSjksT.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-DWeX12Kw.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-B55MhO6l.js";const me=()=>{const T=V(),y=Q().authButtonListGet[T.name]||[];return{BUTTONS:ee(()=>{let d={};return y.forEach(v=>d[v]=!0),d})}},fe={class:"table-box"},be=B({name:"useProTable"}),Ie=B({...be,setup(T){const C=H(),y=()=>{C.push(`/proTable/useProTable/detail/${Math.random().toFixed(3)}?params=detail-page`)},i=g(),d=te({type:1}),v=e=>({list:e.list,total:e.total,pageNum:e.pageNum,pageSize:e.pageSize}),P=e=>{let t=JSON.parse(JSON.stringify(e));return t.username&&(t.username="custom-"+t.username),I(t)},{BUTTONS:D}=me(),N=[{type:"selection",fixed:"left",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"username",label:"用户姓名",search:{el:"input"},render:e=>a(c("el-button"),{type:"primary",link:!0,onClick:()=>b.success("我是通过 tsx 语法渲染的内容")},{default:()=>[e.row.username]})},{prop:"gender",label:"性别",enum:Y,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",search:{el:"input"}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",enum:z,search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},render:e=>a(le,null,[D.value.status?a(c("el-switch"),{"model-value":e.row.status,"active-text":e.row.status?"启用":"禁用","active-value":1,"inactive-value":0,onClick:()=>E(e.row)},null):a(c("el-tag"),{type:e.row.status?"success":"danger"},{default:()=>[e.row.status?"启用":"禁用"]})])},{prop:"createTime",label:"创建时间",headerRender:e=>a(c("el-button"),{type:"primary",onClick:()=>{b.success("我是通过 tsx 语法渲染的表头")}},{default:()=>[e.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:330}],A=async e=>{await m(U,{id:[e.id]},`删除【${e.username}】用户`),i.value.getTableList()},F=async e=>{await m(U,{id:e},"删除所选用户信息"),i.value.clearSelection(),i.value.getTableList()},R=async e=>{await m(G,{id:e.id},`重置【${e.username}】用户密码`),i.value.getTableList()},E=async e=>{await m(J,{id:e.id,status:e.status==1?0:1},`切换【${e.username}】用户状态`),i.value.getTableList()},M=async()=>{de.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>K(L,"用户列表",i.value.searchParam))},x=g(null),O=()=>{var t;const e={title:"用户",tempApi:L,importApi:W,getTableList:i.value.getTableList};(t=x.value)==null||t.acceptParams(e)},S=g(null),_=(e,t={})=>{var p;t=[{id:"licensePlate",label:"车牌号",myFormType:{name:"el-input",values:null},value:"豫10068",required:!1},{id:"startDate",label:"驾照开始日期",myFormType:{name:"el-date-picker",values:null},value:"2023-10-10",required:!0},{id:"state",label:"状态",myFormType:{name:"el-select",values:null},value:0,required:!0}];const l={title:e,enumData:[{label:"启用",value:1},{label:"禁用",value:0}],isView:e==="查看",row:t,api:e==="新增"?j:e==="编辑"?X:void 0,getTableList:i.value.getTableList};(p=S.value)==null||p.acceptParams(l)};return(e,t)=>{const l=c("el-button"),p=ae("auth");return f(),re("div",fe,[a(q,{ref_key:"proTable",ref:i,title:"用户列表",columns:N,"request-api":P,"init-param":d,"data-callback":v},{tableHeader:r(s=>[h((f(),k(l,{type:"primary",icon:n(oe),onClick:t[0]||(t[0]=u=>_("新增"))},{default:r(()=>[o("新增用户")]),_:1},8,["icon"])),[[p,"add"]]),h((f(),k(l,{type:"primary",icon:n(ie),plain:"",onClick:O},{default:r(()=>[o("批量添加用户")]),_:1},8,["icon"])),[[p,"batchAdd"]]),h((f(),k(l,{type:"primary",icon:n(ne),plain:"",onClick:M},{default:r(()=>[o("导出用户数据")]),_:1},8,["icon"])),[[p,"export"]]),a(l,{type:"primary",plain:"",onClick:y},{default:r(()=>[o("To 子集详情页面")]),_:1}),a(l,{type:"danger",icon:n($),plain:"",onClick:u=>F(s.selectedListIds),disabled:!s.isSelected},{default:r(()=>[o(" 批量删除用户 ")]),_:2},1032,["icon","onClick","disabled"])]),expand:r(s=>[o(w(s.row),1)]),usernameHeader:r(s=>[a(l,{type:"primary",onClick:t[1]||(t[1]=u=>n(b).success("我是通过作用域插槽渲染的表头"))},{default:r(()=>[o(w(s.row.label),1)]),_:2},1024)]),createTime:r(s=>[a(l,{type:"primary",link:"",onClick:t[2]||(t[2]=u=>n(b).success("我是通过作用域插槽渲染的内容"))},{default:r(()=>[o(w(s.row.createTime),1)]),_:2},1024)]),operation:r(s=>[a(l,{type:"primary",link:"",icon:n(ue),onClick:u=>_("查看",s.row)},{default:r(()=>[o("查看")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(pe),onClick:u=>_("编辑",s.row)},{default:r(()=>[o("编辑")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(ce),onClick:u=>R(s.row)},{default:r(()=>[o("重置密码")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n($),onClick:u=>A(s.row)},{default:r(()=>[o("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["init-param"]),a(se,{ref_key:"drawerRef",ref:S},null,512),a(Z,{ref_key:"dialogRef",ref:x},null,512)])}}});export{Ie as default};
