import{c as C,b as x,e as F,_ as E,u as I,d as $,f as N,h as U}from"./user-D4uOcHZT.js";import{T as D,g as L}from"./index-Wt1crfl8.js";import{I as P}from"./index-DrDqyv2m.js";import{_ as B}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-CxJUCFnl.js";import{d as v,h as V,E as g,r as o,s as H,k as a,F as M,v as R,o as q,c as S,b as A,w as s,u as n,B as G,g as d,I as J,J as K,D as j,H as z}from"./index-BPbcnTcR.js";import"./notData-CvMaLoqa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"main-box"},Q={class:"table-box"},W=v({name:"treeProTable"}),se=v({...W,setup(X){V(()=>{w(),g({title:"温馨提示",message:"该页面 ProTable 数据不会自动请求，需等待 treeFilter 数据请求完成之后，才会触发表格请求。",type:"info",duration:1e4}),setTimeout(()=>{g({title:"温馨提示",message:"该页面 ProTable 性别搜索框为远程数据搜索，详情可查看代码。",type:"info",duration:1e4})},0)});const i=o(),u=H({departmentId:""}),c=o([]),w=async()=>{const{data:e}=await C();c.value=e,u.departmentId=c.value[1].id},T=e=>{z.success("请注意查看请求参数变化 🤔"),i.value.pageable.pageNum=1,u.departmentId=e},p=o(!1),m=o([]),h=e=>{m.value.length=0,e&&(p.value=!0,setTimeout(()=>{p.value=!1,m.value.push(...L.filter(r=>r.label.includes(e)))},500))},y=[{type:"index",label:"#",width:80},{prop:"username",label:"用户姓名"},{prop:"gender",label:"性别",sortable:!0,isFilterEnum:!1,enum:m.value,search:{el:"select",props:{placeholder:"请输入性别查询",filterable:!0,remote:!0,reserveKeyword:!0,loading:p,remoteMethod:h}},render:e=>a(M,null,[e.row.gender===1?"男":"女"])},{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",sortable:!0,tag:!0,enum:x,search:{el:"tree-select"},fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"创建时间",width:180},{prop:"operation",label:"操作",width:300,fixed:"right"}],k=async e=>{await I($,{id:[e.id]},`删除【${e.username}】用户`),i.value.getTableList()},_=o(null),f=(e,r={})=>{var t;const l={title:e,row:{...r},isView:e==="查看",api:e==="新增"?N:e==="编辑"?U:void 0,getTableList:i.value.getTableList};(t=_.value)==null||t.acceptParams(l)};return(e,r)=>{const l=R("el-button");return q(),S("div",O,[a(D,{label:"name",title:"部门列表(单选)",data:c.value,"default-value":u.departmentId,onChange:T},null,8,["data","default-value"]),A("div",Q,[a(E,{ref_key:"proTable",ref:i,title:"用户列表","row-key":"id",indent:30,columns:y,"request-api":n(F),"request-auto":!1,"init-param":u,"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:s(()=>[a(l,{type:"primary",icon:n(G),onClick:r[0]||(r[0]=t=>f("新增"))},{default:s(()=>[d("新增用户")]),_:1},8,["icon"])]),operation:s(t=>[a(l,{type:"primary",link:"",icon:n(J),onClick:b=>f("查看",t.row)},{default:s(()=>[d("查看")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(K),onClick:b=>f("编辑",t.row)},{default:s(()=>[d("编辑")]),_:2},1032,["icon","onClick"]),a(l,{type:"primary",link:"",icon:n(j),onClick:b=>k(t.row)},{default:s(()=>[d("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["request-api","init-param"]),a(B,{ref_key:"drawerRef",ref:_},null,512),a(P,{ref:"dialogRef"},null,512)])])}}});export{se as default};
